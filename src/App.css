@import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');

/* Contenedor principal opcional */
.hero {
  width: 100%;
  min-height: 100vh; /* ocupa la pantalla completa */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 0.75rem;
  padding: 2rem;
  /* Fondo negro sin imagen en main */
  background-color: #000;
}

/* Overlay del modal: oscurece un poco el fondo pero se sigue viendo */
.modal-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.45);
  backdrop-filter: blur(2px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  animation: overlay-fade 200ms ease-out;
}

/* Contenedor del modal más rectangular */
.modal {
  --modal-width: min(92vmin, 1000px);
  width: var(--modal-width);
  aspect-ratio: 4 / 3; /* más rectangular en horizontal */
  border-radius: 28px; /* esquinas redondeadas para parecer tarjeta */
  overflow: hidden;    /* respeta el radio en el contenido */
  background: #fff;
  box-shadow: 0 16px 44px rgba(0,0,0,0.35);
  padding: 24px;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  animation: modal-pop 220ms ease-out;
}

/* Botón cerrar (X) arriba a la derecha */
.modal-close {
  position: absolute;
  top: 14px;
  right: 14px;
  width: 36px;
  height: 36px;
  border-radius: 10px;
  background: rgba(0,0,0,0.08);
  border: none;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  color: transparent; /* ocultamos el carácter ×; usamos pseudo-elementos */
  font-size: 0;
  transition: background 160ms ease, transform 160ms ease, box-shadow 160ms ease;
}

.modal-close::before,
.modal-close::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  width: 18px;
  height: 2px;
  background: #111;
  border-radius: 2px;
  transform-origin: center;
}

.modal-close::before { transform: translate(-50%, -50%) rotate(45deg); }
.modal-close::after  { transform: translate(-50%, -50%) rotate(-45deg); }

.modal-close:hover {
  background: rgba(0,0,0,0.16);
  transform: scale(1.06);
  box-shadow: 0 4px 10px rgba(0,0,0,0.25);
}

.modal-close:active {
  background: rgba(0,0,0,0.22);
  transform: scale(0.98);
}

.modal-body {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative; /* permite posicionar elementos internos */
}

/* Imagen personaje en el centro del cuadrado */
.modal-character {
  width: auto;
  height: 86%;
  object-fit: contain;
  image-rendering: auto;
}

/* Imagen del globo en el modal, a la derecha (interactiva) */
.modal-globe {
  position: absolute;
  right: 0px; /* movido un poco más a la derecha */
  top: 18%;
  width: 28%;
  max-width: 300px;
  object-fit: contain;
  pointer-events: auto; /* permite hover/click */
  cursor: pointer;
  transition: transform 160ms ease;
}

.modal-globe:hover {
  transform: scale(1.12); /* se agranda al pasar el mouse */
}

/* Globo aplicado encima del personaje (interactivo) */
.globe-applied {
  position: absolute;
  left: 60%;
  top: 24%;
  width: 34%;
  max-width: 360px;
  object-fit: contain;
  pointer-events: auto; /* permite hover/click */
  cursor: pointer;
  z-index: 5;
  filter: drop-shadow(0 4px 10px rgba(0,0,0,0.2));
  transition: transform 160ms ease;
}

.globe-applied:hover {
  transform: scale(1.12);
}

/* Imagen del libro en el modal, a la izquierda (interactiva) */
.modal-book {
  position: absolute;
  left: 6px; /* simétrico al globo en la derecha */
  top: 18%;
  width: 28%;
  max-width: 300px;
  object-fit: contain;
  pointer-events: auto; /* permite hover/click */
  cursor: pointer;
  transition: transform 160ms ease;
}

.modal-book:hover {
  transform: scale(1.12);
}

/* Libro aplicado encima del personaje (misma posición que el globo aplicado) */
.book-applied {
  position: absolute;
  left: 60%;
  top: 24%;
  width: 34%;
  max-width: 360px;
  object-fit: contain;
  pointer-events: auto; /* permite hover/click */
  cursor: pointer;
  z-index: 5;
  filter: drop-shadow(0 4px 10px rgba(0,0,0,0.2));
  transition: transform 160ms ease;
}

.book-applied:hover {
  transform: scale(1.12);
}

.modal-text {
  max-width: 85ch;
  color: #333;
  text-align: center;
  font-size: 16px;
  line-height: 1.5;
}

@keyframes overlay-fade {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes modal-pop {
  0% { transform: translateY(8px) scale(0.98); opacity: 0; }
  100% { transform: translateY(0) scale(1); opacity: 1; }
}


/* Avatar circular con más margen de la esquina y animación tipo videojuego */
.avatar {
  position: fixed;
  bottom: 40px;  /* separado del borde inferior */
  right: 40px;   /* separado del borde derecho */
  width: 220px;
  height: 220px;
  border-radius: 50%;
  overflow: hidden;
  box-shadow: 0 10px 30px rgba(0,0,0,0.4);
  box-sizing: border-box;
  background: #fff;
  backdrop-filter: blur(2px);
  display: flex;
  align-items: center;
  justify-content: center;

  /* Parámetros ajustables de la imagen dentro del círculo */
  --img-size: 80%;   /* cambia este valor para hacerla más grande/pequeña */
  --img-pos-x: 50%;   /* posición horizontal del encuadre */
  --img-pos-y: 100%;   /* posición vertical del encuadre */

  /* Animación de aparición retro: escala por pasos */
  transition: transform 220ms ease, box-shadow 220ms ease;
}

.avatar:hover {
  transform: translateY(-8px) scale(1); /* se levanta ligeramente */
  box-shadow: 0 18px 40px rgba(0,0,0,0.5);
}

/* Contenedor interno para animación de aparición */
.avatar-inner {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: scale(0);
  opacity: 0;
  transform-origin: center;
  will-change: transform, opacity;
  animation: avatar-pop 800ms steps(8, end) 150ms forwards;
}

.avatar img {
  height: var(--img-size);
  object-fit: cover; /* permite que se "lo coma" el círculo */
  object-position: var(--img-pos-x) 0;
  margin-top: 32px;
}

/* Globo de texto pixeleado, con más separación del borde y del avatar */
.pixel-bubble {
  position: fixed; /* independiente del contenedor */
  /* arriba-izquierda del círculo */
  bottom: 260px; /* más separado del borde inferior */
  right: 260px;  /* más separado del borde derecho */
  background: #fff;
  color: #000;
  padding: 12px 16px;
  font-family: 'Press Start 2P', system-ui, Arial, sans-serif;
  font-size: 12px;
  line-height: 1; /* compacto */
  letter-spacing: -1px; /* junta las letras */
  box-shadow:
    0 0 0 3px #000,
    6px 0 0 0 #000,
    -6px 0 0 0 #000,
    0 6px 0 0 #000,
    0 -6px 0 0 #000;
  z-index: 1000;
}

.pixel-bubble::after {
  content: '';
  position: absolute;
  right: 6px;    /* esquina derecha del globo */
  bottom: -10px; /* cola hacia abajo apuntando al círculo */
  transform: rotate(45deg);
  width: 14px;
  height: 14px;
  background: #fff;
  box-shadow:
    0 0 0 3px #000,
    6px 0 0 0 #000,
    -6px 0 0 0 #000,
    0 6px 0 0 #000,
    0 -6px 0 0 #000;
}

/* Texto dentro del globo */
.bubble-text {
  display: inline-flex;
  align-items: center;
}

/* Cursor tipo terminal */
.caret {
  margin-left: 4px;
  display: inline-block;
  animation: blink 0.9s steps(1, end) infinite;
}

@keyframes blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0; }
}

/* Animación de aparición del avatar en estilo retro */
@keyframes avatar-pop {
  0% {
    transform: scale(0);
    opacity: 0;
    filter: contrast(120%) saturate(120%);
  }
  40% {
    transform: scale(0.6);
    opacity: 0.9;
    filter: contrast(140%) saturate(140%);
  }
  60% {
    transform: scale(1.05); /* pequeño overshoot para sensación elástica retro */
    opacity: 1;
  }
  80% {
    transform: scale(0.98); /* rebote */
  }
  100% {
    transform: scale(1);
    opacity: 1;
    filter: none;
  }
}
